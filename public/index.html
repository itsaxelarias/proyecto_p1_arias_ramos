<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Osprey GX Chat</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- ---------- Pantalla de ingreso (overlay) ---------- -->
  <div id="join-screen" class="join-wrap" aria-modal="true" role="dialog">
    <div class="join-card">
      <div class="join-head">
        <div class="join-logo">ðŸ¦…</div>
        <div>
          <h1>Osprey GX Chat</h1>
          <p>Elige tu nombre y avatar</p>
        </div>
      </div>

      <!-- Selector + preview -->
      <label class="avatar-picker">
        <input id="joinAvatar" type="file" accept="image/*" hidden />
        <div class="avatar-preview" id="joinAvatarPreview" title="Seleccionar avatar">
          <span>ðŸ“·</span>
        </div>
        <div class="avatar-help">Sube imagen (PNG/JPG, mÃ¡x. 5&nbsp;MB)</div>
      </label>

      <!-- MODAL de recorte -->
      <div id="cropper" class="cropper hidden" aria-hidden="true">
        <div class="cropper-card">
          <div class="crop-stage" id="cropStage">
            <img id="cropImg" alt="Recortar" />
            <div class="crop-mask"></div>
          </div>

          <div class="crop-controls">
            <input id="cropZoom" type="range" min="0.5" max="3" step="0.01" value="1" />
            <div class="crop-actions">
              <button id="cropCancel" class="btn">Cancelar</button>
              <button id="cropUse" class="btn primary">Usar</button>
            </div>
          </div>
        </div>
      </div>

      <input id="joinName" class="join-input" placeholder="Tu nombre" />
      <button id="joinBtn" class="btn primary">Unirse</button>
    </div>
  </div>

  <!-- ---------- AplicaciÃ³n ---------- -->
  <div class="app" id="app" hidden>
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">ðŸ¦…</div>
        <div class="brand-text">
          <h1>Osprey GX Chat</h1>
          <span>Distribuidas â€¢ WS</span>
        </div>
      </div>

      <nav class="channels">
        <h2>Canales</h2>
        <ul id="channelList">
          <li class="active" data-channel="general"># general</li>
          <li data-channel="off-topic"># off-topic</li>
          <li data-channel="soporte"># soporte</li>
        </ul>
      </nav>

      <!-- Panel â€œYoâ€ -->
      <div class="me">
        <div class="me-left">
          <div class="me-avatar" id="meAvatar">ðŸŸ </div>
          <div class="me-info">
            <div class="me-name" id="usernameDisplay">Invitado</div>
            <div class="me-status-row">
              <span class="status status-online" id="meDot"></span>
              <span id="mePresence">En lÃ­nea</span>
            </div>
          </div>
        </div>
      </div>
    </aside>

    <!-- Chat -->
    <main class="chat">
      <header class="chat-header">
        <div class="room">
          <h2 id="roomTitle"># general</h2>
          <span class="sub">Osprey GX Chat</span>
        </div>
        <div class="actions">
          <button id="reconnectBtn" class="btn ghost" title="Reconectar">â†»</button>
          <button id="clearBtn" class="btn warn" title="Cerrar sesiÃ³n">Cerrar</button>
        </div>
      </header>

      <!-- Miembros -->
      <section class="members" aria-label="Miembros">
        <div class="members-title">Miembros</div>
        <ul class="members-list" id="members"></ul>
      </section>

      <!-- Mensajes -->
      <section class="messages-wrap">
        <div id="messages" class="messages" aria-live="polite"></div>
      </section>

      <!-- Composer -->
      <footer class="composer">
        <input id="message" class="input" placeholder="Escribe un mensaje..." />
        <button id="sendBtn" class="btn primary">Enviar</button>
      </footer>
    </main>
  </div>

  <script src="script.js"></script>
</body>
</html>
